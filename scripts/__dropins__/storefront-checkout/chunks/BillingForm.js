import"@dropins/tools/event-bus.js";import{m as A,n as B,l as F}from"./fixtures.js";import{A as b}from"./getMultilineValues.js";import{s as h}from"./setBillingAddress.js";import{p as v}from"./setShippingAddress.js";import{A as I}from"./ToggleButton.js";import"@dropins/tools/preact-hooks.js";import"@dropins/tools/lib.js";import{c as y}from"./BillToShippingAddress2.js";import{u as S}from"./address-form-fields.js";import{useRef as k,useMemo as L,useCallback as _,useEffect as C}from"@dropins/tools/preact-compat.js";import{jsx as M}from"@dropins/tools/preact-jsx-runtime.js";import{B as N}from"./constants2.js";const D=u=>{var f;const l=k(null),{fields:i}=S(),o=A.value.data,n=o==null?void 0:o.defaultBillingAddress,s=B.value.data,a=(s==null?void 0:s.id)||"",t=s==null?void 0:s.billingAddress,m=(f=s==null?void 0:s.shippingAddresses)==null?void 0:f[0],{checked:r,setByUser:p}=F.value,d=!r,g=L(()=>!i||!d?!1:t?!y(i,t,m):!!n,[d,i,t,m,n]),c=_(e=>h({signal:e.signal,cartId:a,input:{address:r?void 0:v(e.address),same_as_shipping:r}}),[a,r]);return C(()=>{if(!p)return;const e=new AbortController;return r||l.current.triggerSaveAddress(e.signal),()=>{e.abort()}},[r,p]),M(I,{...u,addressType:b.BILLING,autoFill:g,"data-testid":"billing-form",headingId:"Checkout.BillingAddress.title",name:N,ref:l,saveAddressHandler:c,style:{display:d?"block":"none"}})};export{D as B};
