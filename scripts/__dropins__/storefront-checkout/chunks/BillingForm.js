import{jsx as c}from"@dropins/tools/preact-jsx-runtime.js";import"@dropins/tools/event-bus.js";import{l as A,m as B,n as F,k as b}from"./fixtures.js";import{A as h}from"./getMultilineValues.js";import{s as v}from"./setBillingAddress.js";import{p as S}from"./setShippingAddress.js";import{A as k}from"./ToggleButton.js";import"@dropins/tools/preact-hooks.js";import"@dropins/tools/lib.js";import{c as y}from"./BillToShippingAddress2.js";import{useRef as I,useMemo as L,useCallback as _,useEffect as C}from"@dropins/tools/preact-compat.js";import{B as M}from"./constants2.js";const q=f=>{var p;const d=I(null),i=A.value.data,o=B.value.data,a=o==null?void 0:o.defaultBillingAddress,s=F.value.data,t=s==null?void 0:s.billingAddress,n=(p=s==null?void 0:s.shippingAddresses)==null?void 0:p[0],{checked:r,setByUser:m}=b.value,l=!r,u=L(()=>!i||!l?!1:t?!y(i,t,n):!!a,[l,i,t,n,a]),g=_(e=>v({signal:e.signal,input:{address:r?void 0:S(e.address),same_as_shipping:r}}),[r]);return C(()=>{if(!m)return;const e=new AbortController;return r||d.current.triggerSaveAddress(e.signal),()=>{e.abort()}},[r,m]),c(k,{...f,addressType:h.BILLING,autoFill:u,"data-testid":"billing-form",headingId:"Checkout.BillingAddress.title",name:M,ref:d,saveAddressHandler:g,style:{display:l?"block":"none"}})};export{q as B};
