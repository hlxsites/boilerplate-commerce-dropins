import{c as U,e as K,d as Q}from"../chunks/customerOrder.js";import{useState as J,useEffect as X}from"@dropins/tools/preact-hooks.js";import{classes as y,getFormValues as Y}from"@dropins/tools/lib.js";import{jsx as r,jsxs as s,Fragment as S}from"@dropins/tools/preact-jsx-runtime.js";import{Icon as D,Button as W,Skeleton as k,SkeletonRow as l,Card as I,InLineAlert as rr,Field as z,Input as F,Price as v,Divider as R,CartItem as er,Image as nr,CartItemSkeleton as w}from"@dropins/tools/components.js";import*as p from"@dropins/tools/preact-compat.js";import{useReducer as ar,useState as tr,useCallback as M,useEffect as Z}from"@dropins/tools/preact-compat.js";import{Text as m,useText as q}from"@dropins/tools/i18n.js";import{events as or}from"@dropins/tools/event-bus.js";import"@dropins/tools/fetch-graphql.js";const ir=()=>{const n=()=>window.innerWidth>=1920?"xxlarge":window.innerWidth>=1366?"xlarge":window.innerWidth>=1024?"large":window.innerWidth>=768?"medium":"small",[e,t]=J(n());return X(()=>{let i;const o=()=>{i&&clearTimeout(i),i=setTimeout(()=>t(n()),50)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),i&&clearTimeout(i)}},[]),e};var E=(n=>(n.ADD_ORDER_REFERENCE="ADD_ORDER_REFERENCE",n.LOADING="LOADING",n.SET_DETAILS="SET_DETAILS",n.ALERT="ALERT",n.DISMISS_ALERT="DISMISS_ALERT",n))(E||{}),V=(n=>(n.ERROR="error",n.WARNING="warning",n.SUCCESS="success",n))(V||{}),L=(n=>(n.INVALID_ORDER="invalid_order",n.INVALID_SEARCH="invalid_search",n.UNKNOWN="unknown_error",n))(L||{});function cr(n,e){switch(e.type){case"LOADING":return{...n,isLoading:!0};case"SET_DETAILS":return{...n,isLoading:!1,details:e.details,alert:e.alert,isOrderFromSearchForm:e.fromSearchForm||!1};case"ALERT":return{...n,isLoading:!1,alert:e.alert};case"DISMISS_ALERT":return{...n,alert:void 0};default:return n}}const $=({children:n,className:e})=>ir()!=="small"?r("div",{className:e,children:n}):r(S,{children:n});function dr(n){const e=n==null?void 0:n.total,t=n==null?void 0:n.is_virtual;if(!e)return;const i=e==null?void 0:e.grand_total,o=e==null?void 0:e.subtotal,a=e==null?void 0:e.total_shipping,c=e==null?void 0:e.total_tax;return{total:{inclTax:{amount:(i==null?void 0:i.value)||0,currency:(i==null?void 0:i.currency)||""}},subtotal:{amount:(o==null?void 0:o.value)||0,currency:(o==null?void 0:o.currency)||"",isTaxIncl:!1},shipping:{amount:(a==null?void 0:a.value)||0,currency:(a==null?void 0:a.currency)||"",isVirtual:t},tax:{amount:(c==null?void 0:c.value)||0,currency:(c==null?void 0:c.currency)||""}}}const sr=({state:n})=>{const{isLoading:e,details:t}=n,i=dr(t);return s(S,{children:[r(Sr,{isLoading:e,summary:i}),r(Ir,{isLoading:e,details:t})]})},mr=({state:n})=>r($,{className:"order-confirmation__aside",children:r(sr,{state:n})}),lr=({state:n,routeHome:e,routeSupport:t,onSignUpClick:i})=>{const{details:o,isLoading:a}=n,c=o==null?void 0:o.billing_address,d=(c==null?void 0:c.firstname)||"",u=(c==null?void 0:c.lastname)||"",g=(o==null?void 0:o.number)||"",O=(o==null?void 0:o.status)||"",f=(o==null?void 0:o.email)||"";return s(S,{children:[(a||!a&&(!!d&&!!g))&&r(_r,{isLoading:a,customerName:d,customerLastName:u,orderNumber:g,orderStatus:O,orderEmail:f,onSignUpClick:i}),r(Or,{isLoading:a,orderDetails:o}),r(Nr,{isLoading:a,routeHome:e,routeSupport:t})]})},ur=({state:n,routeHome:e,routeSupport:t,dismissAlert:i,onOrderSearch:o,onSignUpClick:a})=>r($,{className:"order-confirmation__main",children:r(lr,{state:n,routeHome:e,routeSupport:t,dismissAlert:i,onOrderSearch:o,onSignUpClick:a})}),fr=({className:n,state:e,dismissAlert:t,routeHome:i,routeSupport:o,onOrderSearch:a,onSignUpClick:c})=>{const{details:d,alert:u,isLoading:g}=e,O=!!(d!=null&&d.number),f=u&&u.code===L.INVALID_ORDER,h=u&&u.code===L.INVALID_SEARCH;return!g&&!O?r("div",{className:y(["order-confirmation",n]),children:r(vr,{alert:f||h?{heading:u.message,description:"",type:u.type,onDismiss:t}:void 0,onOrderSearch:a})}):s("div",{className:y(["order-confirmation",n]),children:[r(ur,{state:e,dismissAlert:t,routeHome:i,routeSupport:o,onOrderSearch:a,onSignUpClick:c}),r(mr,{state:e})]})},hr=n=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},p.createElement("g",{clipPath:"url(#clip0_4797_15077)"},p.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M10.15 20.85L1.5 17.53V6.63L10.15 10V20.85Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M1.5 6.63001L10.15 3.20001L18.8 6.63001L10.15 10L1.5 6.63001Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M6.17969 4.77002L14.8297 8.15002V11.47",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M18.7896 12.64V6.63L10.1396 10V20.85L14.8296 19.05",stroke:"currentColor",strokeLinejoin:"round"}),p.createElement("path",{className:"success-icon",vectorEffect:"non-scaling-stroke",d:"M15.71 17.26C15.71 15.38 17.23 13.86 19.11 13.86C20.99 13.86 22.51 15.38 22.51 17.26C22.51 19.14 20.99 20.66 19.11 20.66C17.23 20.66 15.71 19.14 15.71 17.26Z",stroke:"currentColor"}),p.createElement("path",{className:"success-icon",vectorEffect:"non-scaling-stroke",d:"M17.4805 17.49L18.5605 18.41L20.7205 16.33",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"})),p.createElement("defs",null,p.createElement("clipPath",{id:"clip0_4797_15077"},p.createElement("rect",{width:22,height:18.65,fill:"white",transform:"translate(1 2.70001)"})))),pr=n=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},p.createElement("path",{vectorEffect:"non-scaling-stroke",fillRule:"evenodd",clipRule:"evenodd",d:"M1 20.8953L12.1922 1.5L23.395 20.8953H1ZM13.0278 13.9638L13.25 10.0377V9H11.25V10.0377L11.4722 13.9638H13.0278ZM11.2994 16V17.7509H13.2253V16H11.2994Z",fill:"currentColor"})),_r=({isLoading:n,customerName:e,customerLastName:t,orderNumber:i,orderStatus:o,orderEmail:a,onSignUpClick:c})=>n?r(yr,{}):s("div",{className:"order-confirmation-header order-confirmation__card",children:[r(D,{source:hr,size:"64",className:"order-confirmation-header__icon"}),r("h1",{className:"order-confirmation-header__title",children:e?r(m,{id:"OrderConfirmation.Header.title",fields:{name:e}}):r(m,{id:"OrderConfirmation.Header.defaultTitle"})}),i&&s("p",{className:"order-confirmation-header__order",children:[r(m,{id:"OrderConfirmation.Header.order",fields:{order:i}}),o!==void 0&&o!==""&&s("span",{className:"order-confirmation-header__status",children:[" ","(",o,")"]})]}),c&&s("div",{className:"order-confirmation-create-account",children:[r("p",{className:"order-confirmation-create-account__message",children:r(m,{id:"OrderConfirmation.Header.CreateAccount.message"})}),r(W,{"data-testid":"create-account-button",className:"order-confirmation-create-account__button",size:"medium",variant:"secondary",type:"submit",onClick:()=>c([{code:"firstname",defaultValue:e||""},{code:"lastname",defaultValue:t||""},{code:"email",defaultValue:a||""}]),children:r(m,{id:"OrderConfirmation.Header.CreateAccount.button"})})]})]}),yr=()=>s(k,{"data-testid":"order-confirmation-header-skeleton",className:"order-confirmation-header",children:[r(l,{variant:"empty",size:"xlarge",fullWidth:!0}),r(l,{variant:"empty",size:"medium"}),r(l,{variant:"empty",size:"medium"}),r(l,{variant:"empty",size:"medium"}),r(l,{variant:"empty",size:"medium"}),r(l,{variant:"empty",size:"medium"}),r(l,{size:"small",fullWidth:!0}),r(l,{variant:"heading",size:"xsmall",fullWidth:!0})]}),vr=({alert:n,onOrderSearch:e})=>{const t=q({email:"OrderConfirmation.OrderSearchForm.email",postcode:"OrderConfirmation.OrderSearchForm.postcode",number:"OrderConfirmation.OrderSearchForm.orderNumber"}),i=o=>{o.preventDefault();const a=Y(o.target);e==null||e(a)};return s(I,{variant:"secondary",className:"order-confirmation-order-search-form order-confirmation__card",children:[r("h2",{className:"order-confirmation-order-search-form__title",children:r(m,{id:"OrderConfirmation.OrderSearchForm.title"})}),r("p",{children:r(m,{id:"OrderConfirmation.OrderSearchForm.description"})}),n&&r(rr,{className:"order-confirmation-order-search-form__alert","data-testid":"order-confirmation-alert",icon:r(D,{source:pr}),...n}),s("form",{className:"order-confirmation-order-search-form__fields",onSubmit:i,children:[s("div",{className:"order-confirmation-order-search-form__fields-columns",children:[r(z,{children:r(F,{id:"order-email",name:"email",type:"email",autocomplete:"email",placeholder:t.email,floatingLabel:t.email,required:!0,"aria-label":t.email,"aria-required":!0})}),r(z,{children:r(F,{id:"postcode",name:"postcode",type:"text",autocomplete:"postal-code",placeholder:t.postcode,floatingLabel:t.postcode,required:!1,"aria-label":t.postcode,"aria-required":!0})})]}),r(z,{children:r(F,{id:"order-number",name:"number",type:"text",placeholder:t.number,floatingLabel:t.number,required:!0,"aria-label":t.number,"aria-required":!0})}),r(W,{className:"order-confirmation-order-search-form__button",size:"medium",variant:"primary",type:"submit",children:r(m,{id:"OrderConfirmation.OrderSearchForm.button"})},"logIn")]})]})},Or=({isLoading:n,orderDetails:e})=>{var A,P,B,H,j;if(n)return r(gr,{});const t=e&&(e==null?void 0:e.number),i=(e==null?void 0:e.email)||"",o=e&&i!=="",a=e==null?void 0:e.shipping_address,c=e&&a!==null,d=e==null?void 0:e.billing_address,u=e&&d!==null,g=e==null?void 0:e.shipping_method,O=(P=(A=e==null?void 0:e.total)==null?void 0:A.total_shipping)==null?void 0:P.value,f=(H=(B=e==null?void 0:e.total)==null?void 0:B.total_shipping)==null?void 0:H.currency,h=e&&g&&f&&O!=null,_=e==null?void 0:e.payment_methods,N=_&&_.length>0,x=N?(j=_[0])==null?void 0:j.name:"",G=e&&N&&x!=="";return s(I,{"data-testid":"order-confirmation-details",variant:"secondary",className:"order-confirmation-details order-confirmation__card",children:[r("div",{className:"order-confirmation-details__header",children:r("h2",{className:"order-confirmation-details__title",children:r(m,{id:"OrderConfirmation.Details.title"})})}),s("div",{className:"order-confirmation-details__contact",children:[(!e||o)&&r("h3",{children:r(m,{id:"OrderConfirmation.Details.contact"})}),o&&r("p",{children:i}),!t&&r(C,{rows:1,"data-testid":"order-confirmation-details-contact-skeleton"})]}),s("div",{className:"order-confirmation-details__information",children:[s("div",{className:"order-confirmation-details__shipping_address",children:[(!t||c)&&r("h3",{children:r(m,{id:"OrderConfirmation.Details.shippingAddress"})}),c&&s(S,{children:[s("p",{children:[a==null?void 0:a.firstname," ",a==null?void 0:a.lastname]}),a==null?void 0:a.street.map((T,b)=>r("p",{children:T},b)),s("p",{children:[a==null?void 0:a.city," ",a==null?void 0:a.region," ",a==null?void 0:a.postcode,", ",a==null?void 0:a.country_code]})]}),!t&&r(C,{rows:3,"data-testid":"order-confirmation-shipping-address-skeleton"})]}),s("div",{className:"order-confirmation-details__billing_address",children:[(!t||u)&&r("h3",{children:r(m,{id:"OrderConfirmation.Details.billingAddress"})}),u&&s(S,{children:[s("p",{children:[d==null?void 0:d.firstname," ",d==null?void 0:d.lastname]}),d==null?void 0:d.street.map((T,b)=>r("p",{children:T},b)),s("p",{children:[d==null?void 0:d.city," ",d==null?void 0:d.region," ",d==null?void 0:d.postcode,", ",d==null?void 0:d.country_code]})]}),!t&&r(C,{rows:3,"data-testid":"order-confirmation-billing-address-skeleton"})]}),s("div",{className:"order-confirmation-details__shipping-method",children:[(!t||h)&&r("h3",{children:r(m,{id:"OrderConfirmation.Details.shippingMethod"})}),h&&r(S,{children:O===0?r("p",{className:"order-confirmation-order-summary__price",children:r(m,{id:"OrderConfirmation.Details.freeShipping"})}):s("p",{children:[r(v,{amount:O,currency:f})," ",g]})}),!t&&r(C,{rows:1,"data-testid":"order-confirmation-details-shipping-method-skeleton"})]}),s("div",{className:"order-confirmation-details__payment-method",children:[(!t||G)&&r("h3",{children:r(m,{id:"OrderConfirmation.Details.paymentMethod"})}),G&&r("p",{children:x}),!t&&r(C,{rows:1,"data-testid":"order-confirmation-details-payment-method-skeleton"})]})]})]})},gr=()=>r(I,{variant:"secondary",className:"order-confirmation-details",children:s(k,{"data-testid":"order-confirmation-details-skeleton",children:[r(l,{variant:"heading",size:"medium",fullWidth:!0}),r(l,{size:"medium"}),r(l,{variant:"empty",size:"medium"}),r(l,{size:"xlarge"}),r(l,{size:"xlarge"}),r(l,{size:"xlarge"}),r(l,{size:"xlarge"})]})}),Nr=({isLoading:n,className:e,routeHome:t,routeSupport:i,...o})=>n?r(Cr,{}):s("div",{className:y(["order-confirmation-footer",e]),...o,children:[(t==null?void 0:t())&&r(W,{"data-testid":"order-confirmation-footer__continue-button",className:"order-confirmation-footer__continue-button",size:"medium",variant:"primary",type:"submit",href:t==null?void 0:t(),children:r(m,{id:"OrderConfirmation.Footer.continueShopping"})},"continueShopping"),s("p",{className:"order-confirmation-footer__contact-support",children:[r(m,{id:"OrderConfirmation.Footer.help"})," ",(i==null?void 0:i())&&r("a",{href:i==null?void 0:i(),rel:"noreferrer",className:"order-confirmation-footer__contact-support-link","data-testid":"order-confirmation-footer__contact-support-link",children:r(m,{id:"OrderConfirmation.Footer.contactSupport"})})]})]}),Cr=()=>s(k,{className:"order-confirmation-footer",children:[r(l,{size:"small",fullWidth:!0}),r(l,{variant:"heading",size:"xsmall",fullWidth:!0})]}),C=({rows:n,size:e="xsmall",...t})=>r(k,{className:"static-skeleton",...t,children:Array.from(Array(n).keys()).map(i=>r(l,{variant:"heading",size:e,fullWidth:!0},i))}),Sr=({className:n,isLoading:e,summary:t,variant:i="secondary"})=>{if(e)return r(Er,{});const{total:o,subtotal:a,shipping:c,tax:d}=t??{};return s(I,{className:y(["order-confirmation-order-summary",n]),variant:i,children:[r("h2",{className:"order-confirmation-order-summary__title",children:r(m,{id:"OrderConfirmation.OrderSummary.title"})}),r(R,{variant:"primary"}),a!=null?s("div",{"data-testid":"order-summary-subtotal",className:"order-confirmation-order-summary__row",children:[r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.subtotal"})}),r(v,{amount:a==null?void 0:a.amount,currency:a==null?void 0:a.currency,className:y(["order-confirmation-order-summary__price",n])})]}):r(C,{rows:1,"data-testid":"order-confirmation-order-summary-subtotal-skeleton"}),(a==null?void 0:a.isTaxIncl)&&r("div",{"data-testid":"order-summary-subtotal-incl-tax",className:"order-confirmation-order-summary__row order-confirmation-order-summary__row--muted",children:r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.includingTaxes"})})}),c!=null?c.isVirtual?null:s("div",{"data-testid":"order-summary-shipping",className:"order-confirmation-order-summary__row",children:[r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.shipping"})}),c.amount===0?r("p",{className:"order-confirmation-order-summary__price",children:r(m,{id:"OrderConfirmation.OrderSummary.freeShipping"})}):r(v,{amount:c.amount,currency:c.currency,className:y(["order-confirmation-order-summary__price",n])})]}):r(C,{rows:1,"data-testid":"order-confirmation-order-summary-shipping-skeleton"}),d!=null&&!d.breakdown&&s("div",{"data-testid":"order-summary-tax",className:"order-confirmation-order-summary__row",children:[r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.tax"})}),r(v,{amount:d.amount,currency:d.currency,className:y(["order-confirmation-order-summary__price",n])})]}),d!=null&&d.breakdown&&s(S,{children:[r(R,{variant:"secondary"}),r("div",{className:"order-confirmation-order-summary__row order-confirmation-order-summary__row--margin-bottom",children:r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.taxBreakdown"})})}),d.breakdown.map(u=>s("div",{"data-testid":"order-summary-tax-breakdown",className:"order-confirmation-order-summary__row order-confirmation-order-summary__row--muted",children:[r("p",{children:u.label}),r(v,{amount:u.amount.value,currency:u.amount.currency,className:y(["order-confirmation-order-summary__price",n])})]},u.label)),s("div",{"data-testid":"order-summary-tax-breakdown-total",className:"order-confirmation-order-summary__row order-confirmation-order-summary__row--strong order-confirmation-order-summary__row--margin-top",children:[r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.taxTotal"})}),r(v,{amount:d.amount,currency:d.currency,className:y(["order-confirmation-order-summary__price",n])})]}),r(R,{variant:"secondary"})]}),o!=null?s("div",{"data-testid":"order-summary-total-incl-tax",className:"order-confirmation-order-summary__row order-confirmation-order-summary__row--emphasized",children:[r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.total"})}),r(v,{amount:o==null?void 0:o.inclTax.amount,currency:o==null?void 0:o.inclTax.currency,className:y(["order-confirmation-order-summary__price",n])})]}):r(C,{rows:1,"data-testid":"order-confirmation-order-summary-total-skeleton"}),(o==null?void 0:o.exclTax)!=null&&s("div",{"data-testid":"order-summary-total-excl-tax",className:"order-confirmation-order-summary__row order-confirmation-order-summary__row--muted",children:[r("p",{children:r(m,{id:"OrderConfirmation.OrderSummary.totalExclTax"})}),r(v,{amount:o.exclTax.amount,currency:o.exclTax.currency,className:y(["order-confirmation-order-summary__price",n])})]})]})},Er=()=>s(k,{"data-testid":"order-confirmation-order-summary-skeleton",className:"order-confirmation-order-summary",children:[r(l,{variant:"heading",size:"small"}),r(l,{variant:"empty",size:"small"}),r(l,{variant:"empty",size:"small"}),r(l,{variant:"empty",size:"small"}),r(l,{variant:"heading",size:"small",fullWidth:!0,lines:3})]}),kr=({className:n,item:e,taxIncluded:t=!1})=>{const i=q({Sender:"OrderConfirmation.CartSummary.GiftCard.sender",Recipient:"OrderConfirmation.CartSummary.GiftCard.recipient"});let o=e.regularPrice,a=e.total;t&&(o=e.priceInclTax,a=e.totalInclTax);const c={..."configurableOptions"in e?e.configurableOptions:{},..."senderName"in e&&e.senderName?{[i.Sender]:e.senderName}:{},..."senderEmail"in e&&e.senderEmail?{[i.Sender]:e.senderEmail}:{},..."recipientName"in e&&e.recipientName?{[i.Recipient]:e.recipientName}:{},..."recipientEmail"in e&&e.recipientEmail?{[i.Recipient]:e.recipientEmail}:{}};return r("div",{className:y(["order-confirmation-cart-summary-item",n]),children:r(er,{"data-testid":"cart-summary-item",taxIncluded:t,title:r("div",{"data-testid":"product-name",children:e.name}),sku:r("div",{children:e.sku}),quantity:e.quantity,image:r(nr,{src:e.image.src,alt:e.image.alt,loading:"lazy",width:"80",height:"80",params:{width:80}}),configurations:c,price:r(v,{amount:e.regularPrice.value,currency:o.currency,weight:"normal"}),total:s(S,{children:[r(v,{amount:e.regularPrice.value*e.quantity,currency:o.currency,variant:e.discounted?"strikethrough":"default"}),e.discounted&&r(v,{amount:a.value,currency:a.currency,sale:!0})]})},e.uid)})};function wr(n){return{uid:n.id,quantity:n.quantity_ordered,sku:n.product.sku,name:n.product.name,image:{src:n.product.thumbnail.url,alt:n.product.thumbnail.label},price:{value:n.product_sale_price.value,currency:n.product_sale_price.currency},priceInclTax:{value:n.product_sale_price.value,currency:n.product_sale_price.currency},total:{value:n.product_sale_price.value*n.quantity_ordered,currency:n.product_sale_price.currency},totalInclTax:{value:n.product_sale_price.value*n.quantity_ordered,currency:n.product_sale_price.currency},discount:{value:0,currency:n.product_sale_price.currency},regularPrice:{value:n.product.price_range.maximum_price.regular_price.value,currency:n.product.price_range.maximum_price.regular_price.currency},discounted:n.product.price_range.maximum_price.regular_price.value*n.quantity_ordered!==n.product_sale_price.value*n.quantity_ordered,configurableOptions:Lr(n),senderName:n.__typename==="GiftCardOrderItem"?n.gift_card.sender_name:void 0,senderEmail:n.__typename==="GiftCardOrderItem"?n.gift_card.sender_email:void 0,recipientEmail:n.__typename==="GiftCardOrderItem"?n.gift_card.recipient_email:void 0,recipientName:n.__typename==="GiftCardOrderItem"?n.gift_card.recipient_name:void 0}}function Lr(n){if(!("selected_options"in n))return;const e={};for(const t of n.selected_options)e[t.label]=t.value;return e}const Ir=({isLoading:n,details:e})=>{if(n)return r(xr,{});const t=!1,i=e.items,o=i.length;return r("div",{className:"order-confirmation-cart-summary",children:s(I,{variant:"secondary",children:[r("div",{className:"order-confirmation-cart-summary__heading",children:s("h2",{className:"order-confirmation-cart-summary__title",children:[r(m,{id:"OrderConfirmation.CartSummary.title"})," (",o,")"]})}),r(R,{className:"order-confirmation-cart-summary__divider-top",variant:"primary"}),r("div",{className:"order-confirmation-cart-summary__items",children:i==null?void 0:i.map(a=>{const c=wr(a);return r(kr,{item:c,taxIncluded:t},c==null?void 0:c.uid)})})]})})},xr=()=>s(k,{"data-testid":"cart-summary-skeleton",className:"order-confirmation-cart-summary",style:{gridTemplateColumns:"1fr"},children:[r(l,{variant:"heading",fullWidth:!0,size:"medium"}),r(w,{}),r(w,{}),r(w,{}),r(w,{}),r(w,{})]});function Rr(n){const[e,t]=ar(cr,{isLoading:!1,orderRef:n,details:null,isOrderFromSearchForm:!1}),[i,o]=tr(),a=q({invalidOrder:"OrderConfirmation.Errors.invalidOrder",invalidSearch:"OrderConfirmation.Errors.invalidSearch",pageNotFound:"OrderConfirmation.Errors.pageNotFound",unknown:"OrderConfirmation.Errors.unknown"}),c=M(f=>{switch(f){case"Invalid order":case"Order not found":case"We couldn't locate an order with the information provided.":return{type:V.WARNING,code:L.INVALID_ORDER,message:a.invalidOrder};case"Invalid search":return{type:V.WARNING,code:L.INVALID_SEARCH,message:a.invalidSearch}}},[a.invalidOrder,a.invalidSearch]),d=()=>{t({type:E.DISMISS_ALERT})},u=function(f){g(f)};Z(()=>{const f=or.on("authenticated",h=>{o(h)},{eager:!0});return()=>{f==null||f.off()}},[]);const g=M(f=>{U(f).then(h=>{const N=!!(h!=null&&h.number)?void 0:c("Invalid search");t({type:E.SET_DETAILS,fromSearchForm:!0,alert:N,details:h})}).catch(()=>{const h=c("Invalid search");t({type:E.SET_DETAILS,details:null,alert:h})})},[c]),O=M(f=>{(i?K:Q)(f).then(_=>{const x=!!(_!=null&&_.number)?void 0:c("Invalid order");t({type:E.SET_DETAILS,details:_,alert:x})}).catch(_=>{const N=c(_.message);if(!N){console.error(_);return}t({type:E.ALERT,alert:N})})},[i,c]);return Z(()=>{!e.orderRef||i===void 0||(t({type:E.LOADING}),O(e.orderRef))},[i,O,e.orderRef]),{state:e,authenticated:i,handleOrderSearch:u,dismissAlert:d}}const Ar=({orderRef:n,routeHome:e,routeSupport:t,onSignUpClick:i})=>{const{state:o,authenticated:a,handleOrderSearch:c,dismissAlert:d}=Rr(n);if(a===void 0)return null;const u=!a&&!o.isOrderFromSearchForm;return r(fr,{state:o,dismissAlert:d,onOrderSearch:c,routeHome:e,routeSupport:t,onSignUpClick:u?i:void 0})};export{Ar as OrderConfirmation,Ar as default};
//# sourceMappingURL=OrderConfirmation.js.map
